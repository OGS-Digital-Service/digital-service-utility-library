---
layout: layout.njk
title: Popcorn Picker
permalink: boop/
---
<style>{% include '../css/popcorntwo.css'  %}<</style>
<h2 class="text-lg font-bold m-4">🍿 Stand-Up Popcorn Picker</h2>
<p class="m-4 text-yellow-600">Add your team names, then press “Popcorn” to pick who goes next!</p>

<div class="border p-4 rounder-md outline-dashed justify-items-center boxcard">
  <!--OGS Team-->
  <div class="mt-3 flex -space-x-2 overflow-hidden">
    <img class="inline-block h-10 w-12 justify-items-center rounded full ring-2 ring-white w-80 content-center mx-auto" alt src="/img/NYS_DigitalService_Horizontal_PRIMARY.png">
</div>

  <!-- Output Message -->
  <div id="output" class="text-2xl text-center mb-4 font-bold text-yellow-700" aria-live="polite"></div>

  <!-- Input Area -->
  <div class="flex justify-center">
  <form id="nameForm" class="flex gap-2 mb-4">
    <input 
      id="nameInput"
      type="text"
      placeholder="Add a teammate..."
      class="border-2 border-yellow-300 rounded-md p-2 w-full focus:outline-none focus:ring-2 focus:ring-yellow-400"
      aria-label="Add teammate name"
    >
    <button 
      type="submit"
      class="submit px-8 py-2 border-2 border-black-400 bg-yellow-200 hover:bg-yellow-800 font-semibold w-44"
    >
      Add
    </button>
  </form>
  </div>

  <!-- List -->
  <ul id="nameList" class="space-y-2 mb-6 w-80 content-center mx-auto">
    <li class="text-gray-500 italic text-center content-center">No names yet.</li>
  </ul>

  <!-- Popcorn Button -->
  <div class="flex justify-center">
    <button 
      id="popcornButton"
      class="px-8 border-2 border-black-400 bg-yellow-200 hover:bg-yellow-800 font-semibold w-44"
    >
      🍿 Popcorn 
    </button>
  </div>

  <!-- Simple Animation Bubble -->
  <div class="flex justify-center mt-6">
    <div 
      id="popcornBubble"
      class="hidden px-4 py-2 bg-yellow-400 text-black text-lg font-bold shadow-lg transition-all duration-500 ease-out"
      aria-hidden="true"
    ></div>
  </div>

</div>

<script>
  const form = document.getElementById('nameForm');
  const input = document.getElementById('nameInput');
  const list = document.getElementById('nameList');
  const output = document.getElementById('output');
  const button = document.getElementById('popcornButton');
  const bubble = document.getElementById('popcornBubble');

  let names = [];

  // Add Name
  form.addEventListener('submit', e => {
    e.preventDefault();
    const value = input.value.trim();
    if (!value) return;
    names.push(value);
    input.value = '';
    renderList();
  });

  // Render List
  function renderList() {
    list.innerHTML = '';
    if (names.length === 0) {
      list.innerHTML = '<li class="text-gray-500 italic text-center">No names yet.</li>';
      return;
    }
    names.forEach((name, index) => {
      const li = document.createElement('li');
      li.className = 'flex justify-between items-center bg-white p-3 rounded-md border shadow-sm';
      li.innerHTML = `
        <span class="font-medium">${name}</span>
        <button 
          class="text-sm text-red-500 hover:text-red-700"
          aria-label="Remove ${name}"
          onclick="removeName(${index})"
        >
          ❌
        </button>
      `;
      list.appendChild(li);
    });
  }

  // Remove Name
  function removeName(index) {
    names.splice(index, 1);
    renderList();
  }

  // Popcorn Randomizer
  button.addEventListener('click', () => {
    if (names.length === 0) {
      output.textContent = "✅ All done!";
      bubble.classList.add("hidden");
      return;
    }

    const randomIndex = Math.floor(Math.random() * names.length);
    const name = names[randomIndex];

    // Remove automatically from list
    names.splice(randomIndex, 1);
    renderList();

    showBubble(name);
    output.textContent = `🎤 ${name} is up!`;
  });

  // Animation
  function showBubble(name) {
    bubble.textContent = name;
    bubble.classList.remove('hidden', 'opacity-0', 'translate-y-4');
    bubble.classList.add('opacity-100', '-translate-y-2');

    setTimeout(() => {
      bubble.classList.add('opacity-0', 'translate-y-4');
    }, 1500);
  }
</script>