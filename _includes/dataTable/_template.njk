<link rel="stylesheet" href="https://cdn.datatables.net/2.3.2/css/dataTables.dataTables.css" />
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/2.3.2/js/dataTables.js" async></script>
<script>
    $(document).ready(function() {
       new DataTable('#{{params.tableName}}', {
            columnDefs: [{ 
                orderable: true, 
                targets: [0,1,2,3],  
                render: function(data, type, row, meta) {
                    if (type != 'display') {
                    return data.replace( /<.*?>/g, '' );
                    }
                    return data;
                    }
                
                
                
                }],
                layout: {
                            
                            topStart: {
                                search: {
                                    placeholder: '{{params.searchPlaceholder}}'
                                }
                            },
                            topEnd: 'info',
                            bottomStart: 'paging',
                            bottomEnd: null
                        },
            order: [[1, 'asc']],
            scrollX: true
           
        });
    } );
   
</script>

{%set tableData = params.dataSource %}

<h1> {{params.title}}</h1>

{% if params.disclaimer %}
    <p>{{params.disclaimer}}</p>
{% endif %}

<table id="{{params.tableName}}" class="display">
    <caption>
        {{params.caption}}
    </caption>
    <thead class="">
        <tr>
            {% for headers in params.tableHeaders %}
            <th scope="col">{{headers.title}}</th>
            {% endfor %}  
        </tr>
    </thead>

    <tbody>
        {% for data in tableData %}
            <tr>
                <td> {{data.institution_type}} </td>
                <td> 
                    {% if data.link %}
                        <a href="{{data.link}}">{{data.district_name}}</a>
                    {% else %}
                    {{data.district_name}}
                    {% endif %}
                </td>
                
                <td> {{data.county}} </td>
                <td> 
                    {% if data.status === "Submitted" %}
                    {{data.status}} <i class="fa-solid fa-circle-check" aria-hidden="true"></i>
                    {% else %}
                    <em> {{data.status}} </em>
                    {% endif %}
                
                </td>
            </tr>
        {% endfor %}
    </tbody>

</table>

