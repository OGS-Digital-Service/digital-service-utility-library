<!doctype html>
<html lang="en">
  <!-- If you're reading this: help us obi-wan can-coder, you're our only hope. Apply today: ogs.ny.gov/employment -->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NYSDS Quick Escape Test">
    <meta name="generator" content="11ty/eleventy">    
    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://nysds.dev/escape-test">
    <meta property="og:type" content="website">
    <meta property="og:title" content="">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://nysds.dev/img/">
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://nysds.dev/escape-test">
    <meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://nysds.dev/img/">
    <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>
    <link href="/css/nysds-utilities.css" rel="stylesheet">
<link href="/css/tailwind.css" rel="stylesheet">
<link href="/css/fonts.css" rel="stylesheet">

    <script src="/js/nysds-utilities.js"></script>
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <title>NYSDS Quick Escape Test</title>
  </head>
  <body class="nysds-normalize">
  <a href="#main-site-content-for-skiplink" class="sr-only focus:not-sr-only text-blue-700 underline">Skip to Main Content</a>
    
     <section class="flex flex-col md:flex-row bg-gray-50" aria-label="An official website of the state of new york">
<header>
<a href="https://ny.gov" class="hover:underline flex flex-row items-center md:py-2 py-2 min-w-max mr-8 text-xs" title="Link to The Offical Website of the State of New York"><img class="h-6 ml-6 md:ml-20 mr-4" src="/img/nygov-logo.png" alt="Logo of the State of New York">An Official Website of New York State</a>


</header>
</section>

     <header class="flex items-center w-full p-4 h-20 bg-admin-first ">
<section class="flex">
  <nav class="flex w-full" aria-label="Primary Site Navigation">
    <div class="relative flex items-center h-20 -ml-2 lg:ml-0">
      <h1 class="flex items-center ml-18 lg:ml-16 mr-6 text-white dsari nysds-text-22">
        <a href="/" class="focus:!outline-white">NYS Digital Services</a>
      </h1>
      <div class="absolute left-0 top-0 flex items-center h-20">
        <button class="block lg:hidden w-16 py-3 focus:!outline-white nysds-menu-icon nysds-mobile-button" id="nysds-mobile-menu" aria-controls="nysds-list-menu" aria-expanded="false">
          <span class="sr-only">Mobile Navigation Menu</span>
        </button>
      </div>
     </div>
    <ul class="absolute left-0 z-50 hidden lg:static lg:flex lg:flex-row lg:items-center mt-20 lg:mt-0 text-white captialize font-bold bg-admin-first list-none" id="nysds-list-menu" > <!-- this is first level -->
    
      <li class="w-72 lg:w-auto mx-4 lg:mx-auto lg:ml-2 lg:first:ml-2 last:mb-1 lg:last:mb-0">
          
          <a href="/engineering" class="w-full inline-block lg:w-auto px-4 py-4 lg:px-0 lg:ml-4 focus:!underline focus:!outline-none nysds-submenu-link">Engineering Guide</a><!-- link if no sub menu -->
          
      </li>
    
      <li class="w-72 lg:w-auto mx-4 lg:mx-auto lg:ml-2 lg:first:ml-2 last:mb-1 lg:last:mb-0">
          

            <button type="button" class="w-full lg:w-auto px-4 py-4 lg:px-0 lg:py-4 lg:ml-4 focus:!underline focus:!outline-none captialize text-left nysds-mobile-button nysds-submenu-button font-bold" aria-controls="nysds-submenu-2" aria-expanded="false">Test Menu Link</button> <!-- button if there is a submenu -->

              <ul class="absolute hidden w-80 lg:w-72 lg:mt-3 list-none left-0 lg:left-auto border-t border-white bg-admin-first nysds-submenu" id="nysds-submenu-2"> <!-- this is second level -->
                <li class="pl-8 text-left py-4 block lg:hidden "><button type="button" class="nysds-close-x text-xl nysds-menu-back"> Back <span class="sr-only">back to previous menu</span></button></li>
                
                <li class="flex ">
                  <a href="https://ny.gov" class="w-full inline-block pl-8 md:pl-4  py-4 focus:!underline focus:!outline-none">FIRST Link </a>
                </li>
                
                <li class="flex ">
                  <a href="https://ny.gov" class="w-full inline-block pl-8 md:pl-4  py-4 focus:!underline focus:!outline-none">Second Link that is Longer </a>
                </li>
                
                <li class="flex ">
                  <a href="https://ny.gov" class="w-full inline-block pl-8 md:pl-4  py-4 focus:!underline focus:!outline-none">Third Link </a>
                </li>
                
                <li class="flex ">
                  <a href="https://ny.gov" class="w-full inline-block pl-8 md:pl-4  py-4 focus:!underline focus:!outline-none">And More </a>
                </li>
                
                <li class="flex ">
                  <a href="https://ny.gov" class="w-full inline-block pl-8 md:pl-4  py-4 focus:!underline focus:!outline-none">And More </a>
                </li>
                
                <li class="flex ">
                  <a href="https://ny.gov" class="w-full inline-block pl-8 md:pl-4  py-4 focus:!underline focus:!outline-none">Way More </a>
                </li>
                
              </ul>

          
      </li>
    
    </ul>
  </nav>
</section>
</header>




    <main class="mx-8 md:mx-20" id="main-site-content-for-skiplink">
    
<h1 class="text-2xl font-bold my-4"> Comparison of Escape Options</h1>
<section class="flex flex-col">

<h2 class="font-bold text-xl"> 1. Use a Button </h2>
<div class="flex flex-col lg:flex-row items-center bg-slate-200 p-4 justify-around">
<button type="button" class="bg-white p-4 my-4 border-black border hover:underline lg:w-80" id="escapebutton">This is a quick escape BUTTON element </button>
<pre class="hidden lg:block">
<code class="w-1/2">var button = document.getElementById('escapebutton')
button.addEventListener("click", replacebutton)
  function replacebutton () {
    window.location.replace('https://apple.com')
  }</code>
</pre>
</div>

<h3 class="font-bold text-xl mt-4"> What are the problems specific to the BUTTON approach?</h3>
<ol class="lg:mx-8">
<li><strong>A button shouldn't act as a link.</strong> This goes against the intended use of a button element. The HTML spec as well as accessibility advocates would argue that actual "buttons" should perform an action, like submitting data or opening a modal or dialogue. </li>
<li>Buttons have specific meaning to users of assistive technology and different methods of use (enter, spacebar). When a screenreader announces to a user that they are on a button they may expect different behaviors than we are providing here.</li>
<li> This relies on javascript to do anything at all. Without js enabled this button does nothing.</li>
</ol>



<h2 class="font-bold text-xl"> 2. Use an Anchor (link) </h2>
<div class="flex flex-col lg:flex-row items-center bg-yellow-200 p-4 justify-around">
<a href="https://google.com" class="bg-white p-4 my-4 border-black border hover:underline lg:w-80" id="escapeanchor">This is a quick escape ANCHOR element</a>
<pre class="hidden lg:block">
<code class="w-1/2"> var link = document.getElementById('escapeanchor')
link.addEventListener("click", replacelink)
  function replacelink (e) {
    e.preventDefault();
    window.location.replace('https://apple.com')
  }</code>
</pre> 
</div>
<h3 class="font-bold text-xl"> What are the problems specific to the ANCHOR approach?</h3>
<ol class="lg:mx-8">
<li><strong>We're breaking the native function of a link.</strong> In order to use the <code>window.location.replace</code> method, we have to intercept the native function of the link. This is already a concern and anti-pattern. We're stopping the browser from interpreting the native semantics of a link by using <code> stopPropagation </code> and then re-assigning it a location. Technically, this might not be a concern as long as the two locations are the same, but we're literally re-inventing the wheel here.</li>
<li> As long as we still provide an <code> href </code> then this isn't technically invalid html and wouldn't require javascript to still "work" as a link. Although the history modification wouldn't be functional.</li>
</ol>

<h2 class="font-bold text-xl"> A problem with <u>BOTH</u> options </h2>
<div class="lg:mx-8">
<p class="my-2"> <strong>You can't reliably modify browser history beyond a single level.</strong></p>
<p> Both of these options use the <code> window.location.replace </code> method which does replace the current browser location with the url that you've specified. Meaning that if you hit the back button it will have nowhere to go back to.</p>
<p class="my-2"> <strong>So what's the problem? </strong></p>
<p> <u>This is only useful if you've gone to a single page on a website and no others</u>. If a user has searched google for OPDV, navigated to the homepage, and clicked on a page of content on the OPDV website, then clicks the escape link, this method can only remove the final action from that list. A bad actor hits the back button and the browser will go back to the OPDV homepage in this user journey.</p>
<p class="mt-2"> We can't reliably know how many pages a user has clicked on within the website and be able to remove, rename, or re-assign those pages to other locations, except for the current page. Browsers have some powerful history modification API tools available - think <code> history.pushState()</code> or <code> history.replaceState()</code> - however they aren't really useful without knowing where, when, and how much of the history to modify based on user action. We can't easily know that. </p>
</div>

<h2 class="font-bold text-xl mt-4 text-admin-first"> OGS Digital Services Recommendation </h2>
<p class="lg:mx-8"> Given the accessibility and functionality drawbacks of both approaches, it might be just as effective to keep the current solution in place. Of the two options above, we'd recommend using the ANCHOR link method despite the iffy technical implications of doing so as it has a native fallback without javascript. Removing a single layer of history could benefit some users, so the drawbacks may be worthwhile.</p>
<h3 class="font-bold text-xl mt-4">Suggested Supplemental Reading </h3>
<div class="nysds-textarea">
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/accesskey#accessibility_concerns">MDN Analysis of the <code>accesskey</code> attributes accessibility concerns</a></li>
<li><a href="https://www.w3.org/TR/WCAG20-TECHS/H33.html">WCAG 2.0: Supplementing link text with the title attribute</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/history">MDN History Object</a></li>


</ul>
</div>
</section>
<script>
  var button = document.getElementById('escapebutton')
  button.addEventListener("click", replacebutton)
   function replacebutton () {
    window.location.replace('https://apple.com')
  }
  var link = document.getElementById('escapeanchor')
  link.addEventListener("click", replacelink)
  function replacelink (e) {
    e.preventDefault();
    window.location.replace('https://apple.com')
  }
 
</script>

    </main>
    <footer class="bg-admin-third px-4 py-8 flex flex-col md:flex-row md:items-center items-baseline mt-12">
<h2 class="dsari nysds-text-22 text-black ml-8 md:ml-16 mr-4 border-solid border-b border-black md:border-none pr-16 md:pr-0"><a href="/" aria-label="NYS Digital Services" class="">NYS Digital Services</a></h2>
<span class="hidden md:block md:border-solid md:border-l-2 md:border-black md:py-2 md:ml-2 md:mr-4">&nbsp;</span>

<a href="/accessibility" aria-label="Read our accessibility statement" class="font-bold hover:underline ml-8 py-2 md:ml-0 md:px-3"> Accessibility </a>

<a href="/pa11y-reports" aria-label="See some recent automated accessibility reports generated by pa11y-ci for sites we work on" class="font-bold hover:underline ml-8 py-2 md:ml-0 md:px-3"> Automated Accessibility Reports </a>

<a href="https://ogs.ny.gov/contact-office-general-services" aria-label="Link to Agency&#39;s contact information." class="font-bold hover:underline ml-8 py-2 md:ml-0 md:px-3"> Contact </a>

<section class="flex flex-row md:ml-auto mt-8 md:mt-0 ml-8 mr-8" aria-label="social media links">

<a href="https://github.com/OGS-Digital-Service/digital-services-utilities" title="Github" class="font-bold hover:underline" aria-label="Check out our github repos.">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-github m-auto" viewBox="0 0 16 16">
  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/> 
</svg>GitHub</a>

</section>
</footer>
  </body>
</html>